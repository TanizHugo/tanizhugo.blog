---
title: 搭建青龙面板+自动刷京豆
date: 2023-10-4 17:59:53
author: Taniz Hugo
language: zh-CN
abbrlink: 
top: false
is_draft: false
summary: 最近发现了一个很好用的项目，叫做青龙面板，可以很好的将自己的空闲VPS利用起来.
categories:
  - 其他
tags:
  - 青龙面板
  - 脚本
---

#### 前言

青龙面板的地址：https://github.com/whyour/qinglong

青龙面板的简介：

1. **自动化任务管理：** 青龙面板允许用户创建、配置和管理各种自动化任务。这些任务可以是脚本、定时任务或其他自动化操作。
2. **薅取京东羊毛：** 青龙面板在薅取京东羊毛方面非常流行。用户可以使用各种脚本来执行京东商城相关的任务，例如领取京豆、签到、购物等，以获取优惠和奖励。
3. **Docker 环境支持：** 青龙面板通常在Docker环境下运行。这使得它易于部署和管理，可以在各种操作系统上使用。
4. **可视化界面：** 它提供了一个可视化界面，让用户轻松地配置和监控任务的执行。

青龙面板是一个多功能的工具，用于自动化任务管理。它通常与脚本库结合使用，以执行各种自动化任务，包括薅取京东羊毛、定时运行脚本等。搭建青龙面板的过程并不复杂，最重要的是可以将自己**空闲的VPS好好的利用起来**。



#### 安装青龙面板

* 更新系统

```shell
Centos系统：sudo yum -y update
Ubuntu/Debian系统：sudo apt update -y
```



* 安装Docker

青龙面板需要在Docker环境下运行，所以必须先安装Docker服务。

```shell
sudo curl -sSL get.docker.com | sh
```

* 关闭防火墙

根据不同的系统自行选择不同的命令执行

```shell
Centos放行端口：firewall-cmd --zone=public --add-port=5700/tcp --permanent

Ubuntu/Debian放行端口：iptables -A INPUT -p tcp --dport 5700 -j ACCEPT 或者 ufw allow 5700

```

- 配置国内镜像源

如果VPS在国内，那最好配置镜像源，以提升速度

```shell
mkdir -p /etc/docker
tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://0b27f0a81a00f3560fbdc00ddd2f99e0.mirror.swr.myhuaweicloud.com",
    "https://ypzju6vq.mirror.aliyuncs.com",
    "https://registry.docker-cn.com",
    "http://hub-mirror.c.163.com",
    "https://docker.mirrors.ustc.edu.cn"
  ]
}
EOF
systemctl daemon-reload
systemctl restart docker
```

* 启动容器

拉取青龙面板并启动容器

```shell
docker run -dit \
  -v $PWD/ql/data:/ql/data \
  -p 5700:5700 \
  --name qinglong \
  --hostname qinglong \
  --restart unless-stopped \
  whyour/qinglong:latest
```



#### 登录青龙面板

青龙面板需要登录你的个人账号，通过邮箱等服务向你推送登录状态，下面是具体的操作过程

* 访问面板

打开你的浏览器，访问：`http://服务器IP:5700`

* 初始化配置

点击开始安装

![image-20231004181142680](https://s2.loli.net/2023/10/04/CN5HZmKIfgTDizs.png)

* 账号设置

填写你的账号密码

![image-20231004181256878](https://s2.loli.net/2023/10/04/1anlSMAW6wEsCmV.png)

* 通知设置

这一步嫌麻烦的可以跳过设置，对于日常操作不会有任何的影响

如果需要天街通知方式推荐使用Gmail邮箱，emailUser和emailPass填写自己的邮箱名和密码即可

![image-20231004181425001](https://s2.loli.net/2023/10/04/zrZVQjNYmhGiFkJ.png)

* 登录

登录界面就填写刚刚注册的账号名和密码

![image-20231004182820971](https://s2.loli.net/2023/10/04/XKDWEavJbAPGSTs.png)

成功登录后的界面，可以看到现在还没有定时任务，我们需要去获取大佬们的脚本

![image-20231004182856355](https://s2.loli.net/2023/10/04/fQxcs9gnNSL41H5.png)



##### 自动刷京豆

* 安装依赖

在开始刷之前，要安装一些依赖，这些依赖就是脚本所用的一些环境，如果不安装那么就没法允许脚本

跟着下面的图操作，添加上：NodeJs、Python3、Linux 的依赖环境

![image-20231004183428598](https://s2.loli.net/2023/10/04/zw5bQ3pW7YfEsTR.png)

以下是依赖内容

NodeJs依赖如下：

```
request
canvas
cheerio
js-base64
dotenv
magic
tough-cookie
ws@7.4.3
require
requests
date-fns
ts-md5
typescript
json5
axios@v0.27.2
crypto-js
@types/node
png-js
node-telegram-bot-api
fs
jsdom
form-data
jieba
tslib
ds
jsdom -g
prettytable
ql
common
node-jsencrypt
juejin-helper
moment
global-agent
```

Python3依赖如下：

```
bs4
telethon
cacheout
jieba
PyExecJS
ping3
canvas
Crypto
ds
requests
pycryptodome
```

Linux依赖如下：

```
bizCode
bizMsg
lxml
libc-dev
gcc
g++
libffi-dev
python3-dev
```

安装依赖过程大概需要10min，安装过程中可能会出现安装失败的内容，如果安装失败，则可以手动再次安装

PS：有某些依赖安装失败不会影响正常使用

![image-20231004183728793](https://s2.loli.net/2023/10/04/dMYCl3uhzHUWImF.png)

* 添加环境变量

添加环境变量就是添加你的个人的京豆账号Cookies，这样执行脚本的时候就会根据Cookies的账号执行各种任务

获取京豆Cookies的网站：https://m.jd.com/

获取Cookie具体方法：

打开网站 -> 用手机登录 -> 登录后按F12 -> 点击Application -> 点开Cookie -> 找到pt_key=?;pt_pin=?; -> 把对应的值替换到问号中即可，分号要保留

PS：关闭浏览器即可，不要退出登录账号

![image-20231004184542584](https://s2.loli.net/2023/10/04/8jvOoflzPuUmsYG.png)

在面板填入环境变量，一定要注意变量名称和变量值的格式

![image-20231004193713627](https://s2.loli.net/2023/10/04/h4JFbTe1mpYdtNI.png)

* 创建任务

拉取相关的京东刷豆任务脚本

![image-20231004195221837](https://s2.loli.net/2023/10/04/HXT3QuerPqJGR2o.png)

以下是脚本链接：

```
脚本项目地址一：https://github.com/shufflewzc/faker2.git
脚本项目地址二：https://github.com/shufflewzc/faker3.git
脚本项目地址三：https://github.com/Gnuyoah/Thread.git
脚本项目地址四：https://github.com/Akali5/jd-depot.git
```

以下是常用的定时规则

```
（1）0 0 2 1 * ?   表示在每月的1日的凌晨2点调整任务
（2）0 15 10 ? * MON-FRI   表示周一到周五每天上午10:15执行作业
（3）0 15 10 ? 6L 2002-2006   表示2002-2006年的每个月的最后一个星期五上午10:15执行作
（4）0 0 10,14,16 * * ?   每天上午10点，下午2点，4点
（5）0 0/30 9-17 * * ?   朝九晚五工作时间内每半小时
（6）0 0 12 ? * WED    表示每个星期三中午12点
（7）0 0 12 * * ?   每天中午12点触发
（8）0 15 10 ? * *    每天上午10:15触发
（9）0 15 10 * * ?     每天上午10:15触发
（10）0 15 10 * * ?    每天上午10:15触发
（11）0 15 10 * * ? 2005    2005年的每天上午10:15触发
（12）0 * 14 * * ?     在每天下午2点到下午2:59期间的每1分钟触发
（13）0 0/5 14 * * ?    在每天下午2点到下午2:55期间的每5分钟触发
（14）0 0/5 14,18 * * ?     在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发
（15）0 0-5 14 * * ?    在每天下午2点到下午2:05期间的每1分钟触发
（16）0 10,44 14 ? 3 WED    每年三月的星期三的下午2:10和2:44触发
（17）0 15 10 ? * MON-FRI    周一至周五的上午10:15触发
（18）0 15 10 15 * ?    每月15日上午10:15触发
（19）0 15 10 L * ?    每月最后一日的上午10:15触发
（20）0 15 10 ? * 6L    每月的最后一个星期五上午10:15触发
（21）0 15 10 ? * 6L 2002-2005   2002年至2005年的每月的最后一个星期五上午10:15触发
（22）0 15 10 ? * 6#3   每月的第三个星期五上午10:15触发
```

成功添加订阅后，手动运行

![image-20231004195441203](https://s2.loli.net/2023/10/04/8DoF7qHbEnLRmOc.png)

运行完成后，可以在定时任务界面看到许多的刷豆任务出现，并且均已规定好脚本的允许时间

![image-20231004195550414](https://s2.loli.net/2023/10/04/W2iOlj9SdHtLguq.png)

随机运行一条任务，然后查看日志信息看是否成功添加cookie并允许

![image-20231004200444047](https://s2.loli.net/2023/10/04/jPBVQNz7Mr9ZDXt.png)

