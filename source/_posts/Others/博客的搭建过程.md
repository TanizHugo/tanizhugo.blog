
---
title: 博客的搭建过程
date: 2023-08-27 11:16:09
author: Taniz Hugo
language: zh-CN
abbrlink: other2
top: false
is_draft: false
summary: 作为程序员怎么能没有自己的博客呢？现在就开始用Hexo框架搭建一个简易博客！
categories: 
  - 其他
tags:
  - 博客搭建
  - Linux
  - Hexo
---



### 写在前面

本文全篇将基于**Ubuntu**（基于Linux内核）操作系统，借助**Hexo**框架快速搭起自己的博客页面，最后**域名**托管自己的博客。

如果以后时间充裕，我将尝试将博客托管到GitHub。



## 前期准备

### 服务器

这里我建议是一台自己的VPS，如果你的电脑存储很大，并且已经拥有各种环境，那当然可以。

关于VPS这里我推荐Vultr，他家的服务器虽然线路不怎么样，但是可以根据个人需求创建多个不同的节点，不需要的节点删除即可，价格来说我个人认为算是还行的。还有最重要的一个点，他家VPS可以选择国外节点，~~那就可以弄一些很丰富的操作啦~~（不是
这里附下官网连接以及个人邀请码，填写我的邀请码再充值10$就可获得100$的奖励金，这个奖励金有效期为12个月，创建新的服务节点优先消耗奖励的100$。

Vultr：https://www.vultr.com/?ref=9528203-8H



### 域名

域名我推荐在NameSilo购买，购买域名后还要进行域名解析，推荐使用Cloudflare管理。关于域名购买、解析、证书申请网上有很多教程，可以搜索了解下。这里附下官网连接连接。

NameSilo：https://www.namesilo.com/

Cloudflare：https://www.cloudflare.com/

在我的这个博客中有详细的域名购买和配置教程：[DNS与域名的购买和配置](https://blog.tanizhugo.top/posts/network1.html)



### VScode

VScode这个我就不用多说了吧，一个支持多种编程语言，具有众多工具的软件，用他的理由很简单，因为他可以对于有编码格式的文件，如yaml、json等，有更加友好的显示以及编辑，并且可以随意打开文件进行改动，不需要WinSCP等工具的辅助。

这里用VScode之前，记得需要先安装`Remote`的插件，搜索关键词Remote Development进行安装即可。

以上东西都有了之后可以正式开始搭建我们的第一个blog



## 开始搭建博客

Hexo是一个快速、简洁且高校的博客框架，支持Markdown。

以下搭建均基于Hexo的官方文档，这里是官方的文档的地址[Hexo](https://hexo.io/zh-cn/docs/)，需要注意的是中文文档和英文文档的内容会有一定的不同，更详细的内容推荐查看官方的英文文档。

### 服务器环境准备

#### 安装Node.js

node.js作用：编译生成你的静态页面

安装node

```shell
# Ubuntu
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - &&\
sudo apt-get install -y nodejs

#  Debian
curl -fsSL https://deb.nodesource.com/setup_20.x | bash - &&\
apt-get install -y nodejs

# Centos
curl -fsSL https://rpm.nodesource.com/setup_20.x | bash -
```

这里我的系统是Ubuntu，更多的内核和版本参考官方GitHub：https://github.com/nodesource/distributions

#### 安装Git

git作用：拉取Hexo官方的配置文件以及主题

```shell
# Debian/Ubuntu
sudo apt-get install git

# CentOS/RHEL
sudo yum install git

# Fedora
sudo dnf install git

```

#### 安装Hexo

所有必备的应用程序安装完成后，即可使用 npm 安装 Hexo

```shell
npm install -g hexo-cli
```

到此所有需要的就安装完毕了，还是挺简单的，如果想方便自己迁移，可以安装在docker中创建以上环境。

### 创建第一个blog页面

#### 创建环境

在创建页面的之前，我们需要利用Hexo创建一个工作环境

创建工作环境命令：`hexo init [folder]`

* folder是我们需要指定的工作环境路径

现在我们在home目录下创建一个名为"blog"新环境

```shell
root@vultr:~# hexo init blog

root@vultr:~# ls
blog
```

#### 文件架构

接下来进入到环境当中首先了解下文件架构

```shell
root@vultr:~# tree -L 2 new
new/
├── _config.landscape.yml       # 名为 landscape 样式的配置文件
├── _config.yml                 # 网站配置信息，可以配置大部分的参数
├── node_modules                # 下载的依赖文件
├── package.json                # Hexo 的版本以及相关依赖包的版本
├── package-lock.json
├── scaffolds                   # 模板文件，对应三种文章类型
│   ├── draft.md
│   ├── page.md
│   └── post.md
├── source                      # 资源文件夹，存放文章图片等
│   └── _posts                  # 默认存放文章的文件夹，需要注意
└── themes                      # 主题文件夹，Hexo 根据主题生成页面

```

需要注意：`_posts` 文件夹之外，开头命名为 `_ (下划线)的文件` `/ 文件夹`和`隐藏的文件`将会被忽略。`Markdown` 和`HTML` 文件会被解析并放到`public`文件夹，而其他文件会被拷贝过去。

#### 生成文章

生成文章命令：`hexo new [layout] <title>`

* layout: 新建一篇文章。如果没有设置 `layout` 的话，默认使用 `_config.yml` 中的`default_layout`参数代替

* title：文章的标题

|       参数        | 描述                                          |
| :---------------: | :-------------------------------------------- |
|  `-p`, `--path`   | 自定义新文章的路径                            |
| `-r`, `--replace` | 如果存在同名文章，将其替换                    |
|  `-s`, `--slug`   | 文章的 Slug，作为新文章的文件名和发布后的 URL |

```shell
# 生成title为first blog的文章
root@vultr:~/new# hexo new 'first blog'
INFO  Validating config
INFO  Created: ~/new/source/_posts/first-blog.md
```

#### 生成页面

生成文章命令：`hexo generate` 或简写为 `hexo g`

|         选项          | 描述                                                         |
| :-------------------: | :----------------------------------------------------------- |
|   `-d`, `--deploy`    | 文件生成后立即部署网站                                       |
|    `-w`, `--watch`    | 监视文件变动                                                 |
|    `-b`, `--bail`     | 生成过程中如果发生任何未处理的异常则抛出异常                 |
|    `-f`, `--force`    | 强制重新生成文件 Hexo 引入了差分机制，如果 `public` 目录存在，那么 `hexo g` 只会重新生成改动的文件。 使用该参数的效果接近 `hexo clean && hexo generate` |
| `-c`, `--concurrency` | 最大同时生成文件的数量，默认无限制                           |

需要强调的是`-f`这个命令，因为生成的静态文件中已经存在，每次对原文章进行修改过后，如果不起覆盖，那么改动内容不会生成新的页面。

#### 启动服务

启动服务命令：`hexo server`

|       选项       | 描述                           |
| :--------------: | :----------------------------- |
|  `-p`, `--port`  | 重设端口                       |
| `-s`, `--static` | 只使用静态文件                 |
|  `-l`, `--log`   | 启动日记记录，使用覆盖记录格式 |

启动服务器。默认情况下，访问网址为： `http://localhost:4000/`

![image-20230827140048130](https://s2.loli.net/2023/08/27/qh7Dd9nX8Nir3eB.png)

到这一步就已经生成了自己的博客，接下来要做的就是添加各种主题丰富页面。

### 添加主题

学会添加文章后，要开始丰富我们的页面。前面提到主题文件一般都存放在`themes`目录下。关于主题，可以通过官方的给出的一些创作者提供的主题进行选择，下面是官方主题地址。

官方主题地址：https://hexo.io/themes/

选择好自己的主题，点进去一般都是主题创作者自己的GitHub页面，那么我们要做的就是看作者给出的文档怎么拉取主题。我以名为[clean-dark](https://github.com/howardliu-cn/hexo-theme-clean-dark)的主题演示。

```shell
root@blog:~/blog#  git clone https://github.com/howardliu-cn/hexo-theme-clean-dark.git themes/hexo-theme-clean-dark

root@blog:~/new# ls themes/
hexo-theme-clean-dark

```

在`_config.yml`中指指定主题

```yaml
# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: hexo-theme-clean-dark
```

重新生成页面查看新的主题

```shell
root@blog:~/new# hexo g -f

root@blog:~/new# hexo s
```

以下是新生成的页面

![image-20230827142006861](https://s2.loli.net/2023/08/27/T1maVpI5RbxCOs3.png)

## 博客域名托管

既然我们以及利用Hexo生成了静态的网页，那么我们要做的就是将我们的域名绑定我们VPS的IP地址，然后通过Nginx指向我们的静态网页就可以实现啦。

我们需要进行HTPPS的访问，因此需要为我们的域名申请证书才能正常解析，具体的申请证书过程可以看我的这个博客：[HTTPS & TLS & 证书申请](https://blog.tanizhugo.top/posts/network2.html)



#### 安装Nginx服务

通过系统命令直接安装nginx

```shell
# ubuntu
apt install nginx -y

# 开放443端口
ufw allow 443
```

修改nginx系统配置，配置文件位于：/etc/nginx/nginx.conf，将内容替换为以下

```nginx
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /var/run/nginx.pid;

# 事件模块配置
events {
    worker_connections 1024;
}

http {
    server {
        listen 443 ssl http2;
        server_name blog.tanizhugo.top;			# 你的域名

        # SSL 证书设置
        ssl_certificate /etc/cert/blog.server.crt;		# 证书存放位置
        ssl_certificate_key /etc/cert/blog.server.key;	# 证书存放位置

        location / {
            proxy_pass http://{IP}:4000;	# VPS的IP地址与hexo服务端口
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location ~ .*\.(js|css)$ {
            proxy_pass http://{IP}:4000;  # VPS的IP地址与hexo服务端口
        }
    }
}

```

```shell
# 重启nginx服务
systemctl restart nginx
```

在浏览器输入我们的域名查看我们的效果，看起来还阔以

![image-20230827174010317](https://s2.loli.net/2023/08/27/chEi6zP7fXetSpN.png)


到这里看似已经完成了搭建，其实也还没有完全完成，比如：模板样式就需要调整一下，无论怎么说算是有了一个自己的知识库吧，希望自己以后能丰富自己的博客，积累更多的技术！
